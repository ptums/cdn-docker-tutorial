generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id      Int    @id @default(autoincrement())
  account String
  games   Game[]
}

model Course {
  id     Int    @id @default(autoincrement())
  name   String
  rounds Int
  games  Game[]
}

model Game {
  id         Int      @id @default(autoincrement())
  date       DateTime
  courseId   Int
  userId     Int
  finalNote  String?
  finalScore Int
  course     Course   @relation(fields: [courseId], references: [id])
  user       User     @relation(fields: [userId], references: [id])
  scores     Score[]

  @@index([courseId], map: "Game_courseId_fkey")
  @@index([userId], map: "Game_userId_fkey")
}

model Score {
  id     Int    @id @default(autoincrement())
  gameId Int
  hole   Int
  par    String
  score  String
  rating Int
  game   Game   @relation(fields: [gameId], references: [id])

  @@unique([gameId, hole])
}
